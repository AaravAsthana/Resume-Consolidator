<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      font-family: 'Helvetica', sans-serif;
      margin: 0;
      padding: 0;
      font-size: 14px;
    }
    .main-table { width: 100%; border-collapse: collapse; }
    .left-column {
      background-color: #1d4ed8;
      color: white;
      padding: 10px;
      width: 35%;
      vertical-align: top;
    }
    .right-column {
      padding: 10px;
      width: 65%;
      vertical-align: top;
    }
    .section { margin-bottom: 20px; }
    .section h2 {
      font-size: 16px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 2px;
      color: #111;
    }
    .entry { margin-bottom: 12px; }
    .entry-title { font-weight: bold; }
    .entry-dates { float: right; font-style: italic; }
    .clear { clear: both; }
    img.profile-img {
      border-radius: 8px;
      margin-bottom: 20px;
      width: 120px;
      height: 120px;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <table class="main-table">
    <tr>
      <td class="left-column">
        {% if image_path %}<img src="{{ image_path }}" class="profile-img">{% endif %}
        <div class="section">
          <h2>About Me</h2>
          <p>{{ about_me }}</p>
          {% for k, v in contact.items() %}
            {% if v %}<p><strong>{{ k.title() }}:</strong> {{ v }}</p>{% endif %}
          {% endfor %}
        </div>
        {% if references %}
        <div class="section">
          <h2>References</h2>
          {% for ref in references %}<p>{{ ref }}</p>{% endfor %}
        </div>
        {% endif %}
      </td>

      <td class="right-column">
        <div class="section">
          <h1>{{ full_name }}</h1>
          {% if current_job %}<h3>{{ current_job }}</h3>{% endif %}
        </div>

        {% if education %}
        <div class="section">
          <h2>Education</h2>
          {% for ed in education %}
          <div class="entry">
            <div class="entry-title">{{ ed.degree }} — {{ ed.institution }}</div>
            <div class="entry-dates">{{ ed.start_date }}–{{ ed.end_date }} • {{ ed.location }}</div>
            <div class="clear"></div>
            {% for line in ed.details.splitlines() %}
              {% if line %}<div>• {{ line }}</div>{% endif %}
            {% endfor %}
          </div>
          {% endfor %}
        </div>
        {% endif %}

        {% if experience %}
        <div class="section">
          <h2>Experience</h2>
          {% for ex in experience %}
          <div class="entry">
            <div class="entry-title">{{ ex.company }} — {{ ex.position }}</div>
            <div class="entry-dates">{{ ex.start_date }}–{{ ex.end_date }} • {{ ex.location }}</div>
            <div class="clear"></div>
            {% for line in ex.details.splitlines() %}
              {% if line %}<div>• {{ line }}</div>{% endif %}
            {% endfor %}
          </div>
          {% endfor %}
        </div>
        {% endif %}
      </td>
    </tr>
  </table>
</body>
</html>